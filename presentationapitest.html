<!DOCTYPE html>
<html>
<head>
  <link rel="default-presentation"
        href="urn:x-org.chromium:media:source:https://cast.google.com/#__castAppId__=CC1AD845&__castClientId__=1234&__castAutoJoin__=origin_scoped" />
  <script>
    function main() {
      var appIdField = document.getElementById("app-id-field");
      var startSessionButton = document.getElementById("start-session-button");
      var defaultPresentationLink = document.getElementsByTagName("link")[0];

      appIdField.onchange = function(e) {
        defaultPresentationLink.href = appIdField.value;
      };

      startSessionButton.onclick = function(e) {
        navigator.presentation.startSession(defaultPresentationLink.href, "ABCDEFGH")
            .then(function(session) {
              console.log(session);
              session.close();
            })
            .catch(function(e) {
              console.log(e);
            });
      };

      navigator.presentation.onavailablechange = function(e) {
        console.log("Availability changed: " + e.available);
        startSessionButton.disabled = e.available ? "" : "disabled";
      };
    }
  </script>
</head>
<body onload="main()">
  <p>Presentation URL: <input title="Presentation URL" value="urn:x-org.chromium:media:source:https://cast.google.com/#__castAppId__=CC1AD845&__castClientId__=1234&__castAutoJoin__=origin_scoped" type="text" id="app-id-field"/></p>
  <p><input title="Start session" value="Start session" type="button" id="start-session-button" disabled/></p>
</body>
</html>
